# ARF-001: Create review_feedback.py utility module with ReviewTargets dataclass

## User Stories

**As a** developer implementing review feedback workflows
**I want** a centralized dataclass that specifies all file paths and configuration for review feedback
**So that** both create_epic.py and create_tickets.py can reuse the same abstraction via dependency injection

**As a** system integrator
**I want** ReviewTargets to be the single source of truth for file paths and review configuration
**So that** we eliminate hardcoded paths and enable flexible review feedback application

## Acceptance Criteria

1. A new file `cli/utils/review_feedback.py` exists in the codebase
2. The ReviewTargets dataclass is defined with exactly these fields:
   - `primary_file: Path` - Path to main target (epic YAML)
   - `additional_files: List[Path]` - List of other files (ticket markdown files)
   - `editable_directories: List[Path]` - List of directories containing editable files
   - `artifacts_dir: Path` - Path where outputs are written
   - `updates_doc_name: str` - Name of updates documentation file
   - `log_file_name: str` - Name of log file
   - `error_file_name: str` - Name of error file
   - `epic_name: str` - Epic name for documentation
   - `reviewer_session_id: str` - Session ID of reviewer
   - `review_type: Literal["epic-file", "epic"]` - Type of review
3. All fields have proper type hints from typing module (Path from pathlib, List, Literal)
4. The dataclass has a comprehensive docstring explaining:
   - Purpose: Dependency injection container for review feedback configuration
   - Usage pattern: Instantiated by callers, passed to apply_review_feedback()
   - Field descriptions: Each field's role in the review feedback workflow
5. Module-level imports are minimal (pathlib.Path, dataclasses.dataclass, typing.List, typing.Literal)
6. The ReviewTargets dataclass is decorated with @dataclass
7. No validation logic is included (validation happens at call sites)
8. File follows project code style (80 char line length, double quotes per pyproject.toml)

## Technical Context

This ticket creates the foundational data structure for the review feedback abstraction. The ReviewTargets dataclass serves as a dependency injection container that decouples the review feedback application logic from specific file paths and configuration. Currently, create_epic.py hardcodes paths like "epic-file-review-updates.md" and "epic-file-review.log" in its apply_review_feedback() function. This refactoring extracts that configuration into ReviewTargets so that create_tickets.py can reuse the same logic with different paths (e.g., "epic-review-updates.md" for full epic reviews).

The dataclass pattern provides several benefits:
- Type safety through explicit field types
- Immutability (no setter methods needed)
- Clear interface for what configuration is required
- Easy to test (simple object construction)
- Self-documenting through field names and docstrings

## Dependencies

**Depends on:**
- None (foundational ticket)

**Blocks:**
- ARF-002: Extract _build_feedback_prompt() helper function
- ARF-003: Extract _create_template_doc() helper function
- ARF-004: Extract _create_fallback_updates_doc() helper function
- ARF-005: Create main apply_review_feedback() function

## Collaborative Code Context

**Provides to:**
- ARF-002, ARF-003, ARF-004, ARF-005: All helper functions and main function accept ReviewTargets as parameter
- ARF-007: create_epic.py will instantiate ReviewTargets with epic-file-review configuration
- ARF-008: create_tickets.py will instantiate ReviewTargets with epic-review configuration

**Consumes from:**
- None (no dependencies on other tickets)

**Integrates with:**
- This dataclass is the contract between callers (create_epic.py, create_tickets.py) and the review feedback utility functions

## Function Profiles

### `ReviewTargets` (dataclass)
A dependency injection container holding all configuration for review feedback application. Contains file paths, directory paths, output file names, metadata, and review type specification. Instantiated by callers and passed to utility functions.

No methods are defined on this dataclass - it is a pure data container.

## Automated Tests

### Unit Tests

- `test_review_targets_creation_with_all_fields()` - Verify dataclass can be instantiated with all required fields and fields are accessible
- `test_review_targets_type_hints_present()` - Verify all fields have correct type annotations using inspect module
- `test_review_targets_epic_file_review_type()` - Verify review_type can be set to "epic-file" literal
- `test_review_targets_epic_review_type()` - Verify review_type can be set to "epic" literal
- `test_review_targets_path_fields_accept_path_objects()` - Verify Path fields accept pathlib.Path instances
- `test_review_targets_additional_files_empty_list()` - Verify additional_files can be empty list
- `test_review_targets_editable_directories_empty_list()` - Verify editable_directories can be empty list
- `test_review_targets_immutability()` - Verify dataclass is frozen (if frozen=True is added)
- `test_review_targets_string_representation()` - Verify __repr__ shows all fields clearly

### Integration Tests

- `test_review_targets_with_real_paths()` - Create ReviewTargets with real file paths from temp directory and verify Path objects resolve correctly
- `test_review_targets_serialization()` - Verify ReviewTargets can be converted to dict using dataclasses.asdict() for logging purposes

### Coverage Target
100% coverage for this dataclass (critical foundational component)

**Test Framework**: pytest (per pyproject.toml configuration)

**Test Commands**:
```bash
uv run pytest tests/unit/utils/test_review_feedback.py::TestReviewTargets -v
uv run pytest tests/unit/utils/test_review_feedback.py -v --cov=cli.utils.review_feedback --cov-report=term-missing
```

## Definition of Done

- [ ] All acceptance criteria met
- [ ] File cli/utils/review_feedback.py created with ReviewTargets dataclass
- [ ] All fields have proper type hints
- [ ] Comprehensive docstring present
- [ ] Module-level imports are minimal and correct
- [ ] Code follows project style (ruff passes)
- [ ] All tests passing (11 unit tests)
- [ ] Code coverage is 100%
- [ ] Code reviewed
- [ ] No linting errors from ruff

## Non-Goals

- Adding validation logic to ReviewTargets (validation happens at call sites)
- Implementing any review feedback application logic (that's ARF-002 through ARF-005)
- Creating methods on the dataclass (pure data container)
- Adding default values to fields (all fields required by caller)
- Supporting review types beyond "epic-file" and "epic" (future extension)
- Creating file system operations (dataclass only holds paths, doesn't touch files)
- Adding factory methods or builders (direct instantiation is sufficient)
